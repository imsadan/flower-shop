/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2017-06-27 10:38:55 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class register_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("<!DOCTYPE HTML>\r\n");
      out.write("<html>\r\n");
      out.write("  <head>\r\n");
      out.write("      <link type=\"text/css\" rel=\"stylesheet\" href=\"../css/style.css\" />\r\n");
      out.write("      <script type=\"text/javascript\" src=\"../js/jquery-1.6.4.js\"></script>\r\n");
      out.write("    <title>注册页面</title>\r\n");
      out.write("    <style type=\"text/css\">\r\n");
      out.write("       .nc{\r\n");
      out.write("          border:1px \r\n");
      out.write("       }\r\n");
      out.write("       span{\r\n");
      out.write("          font-size:12px;\r\n");
      out.write("       }\r\n");
      out.write("       .change1{\r\n");
      out.write("            color:#aaa;\r\n");
      out.write("       }\r\n");
      out.write("       .change2{\r\n");
      out.write("            color:#000;\r\n");
      out.write("       }\r\n");
      out.write("       .change3{\r\n");
      out.write("           color:red;\r\n");
      out.write("       }\r\n");
      out.write("       .change4{\r\n");
      out.write("            color:green;\r\n");
      out.write("       }\r\n");
      out.write("    \r\n");
      out.write("    </style>\r\n");
      out.write("    \r\n");
      out.write("  </head>\r\n");
      out.write("  \r\n");
      out.write("  <body>\r\n");
      out.write("  ");

		response.setHeader("Pragma", "No-cache");
		response.setHeader("Cache-Control", "no-cache");
		response.setDateHeader("Expires", 0);
		response.flushBuffer();
	
      out.write("\r\n");
      out.write("   <section class=\"container\">\r\n");
      out.write("    <div class=\"login\">\r\n");
      out.write("      <h1>VIP会员注册</h1>\r\n");
      out.write("      <form id=\"personRegForm\" method=\"post\" onsubmit=\"return false;\" onsubmit=\"return sub('click')\">\r\n");
      out.write("        <p>用户名:<input type=\"text\" name=\"username\" value=\"\" id=\"regName\">\r\n");
      out.write("        <span class=\"change1\">请输入6-20位中文，英文或数字</span>\r\n");
      out.write("        <p>密码:<input type=\"password\" name=\"password\" value=\"\" id=\"pwd\">\r\n");
      out.write("        <span class=\"change1\">请输入6-15位英文或数字</span>\r\n");
      out.write("        <p>确认密码:<input type=\"password\" name=\"password2\" value=\"\" id=\"pwdRepeat\">\r\n");
      out.write("        <span class=\"change1\">重新输入密码</span>\r\n");
      out.write("        <p>邮箱:<input type=\"text\" name=\"email\" value=\"\" id=\"email\">\r\n");
      out.write("        <span class=\"change1\">请输入邮箱</span></p>\r\n");
      out.write("      <p><center><input type=\"submit\" name=\"submit\" value=\"注册\" onclick=\"REGISTER.reg();\"/></center>\r\n");
      out.write("      </form>\r\n");
      out.write("     </div>\r\n");
      out.write("   </section>\r\n");
      out.write("<script>\r\n");
      out.write("/*        //获取下一个span                \r\n");
      out.write("      function getspan(obj){\r\n");
      out.write("         while(true){\r\n");
      out.write("           if(obj.nextSibling.nodeName!=\"SPAN\"){\r\n");
      out.write("               obj=obj.nextSibling;\r\n");
      out.write("           }else\r\n");
      out.write("               return obj.nextSibling;\r\n");
      out.write("         }\r\n");
      out.write("      }\r\n");
      out.write("      //click是一个状态， 分清楚是单击提交按，还是失去焦点\r\n");
      out.write("      function check(obj,info,fun,click){\r\n");
      out.write("          var span=getspan(obj);\r\n");
      out.write("          //对焦\r\n");
      out.write("          obj.onfocus=function(){\r\n");
      out.write("              span.innerHTML=info;\r\n");
      out.write("              span.className=\"change2\";\r\n");
      out.write("         }\r\n");
      out.write("     \r\n");
      out.write("          //失焦\r\n");
      out.write("          obj.onblur=function(){\r\n");
      out.write("              if(fun(this.value)){\r\n");
      out.write("                  span.innerHTML=\"输入正确\";\r\n");
      out.write("                  span.className=\"change4\";\r\n");
      out.write("              }else{\r\n");
      out.write("                  span.innerHTML=info;\r\n");
      out.write("                  span.className=\"change3\";\r\n");
      out.write("              }\r\n");
      out.write("          \r\n");
      out.write("          }\r\n");
      out.write("          \r\n");
      out.write("          if(click==\"click\")\r\n");
      out.write("             obj.onblur();\r\n");
      out.write("      }\r\n");
      out.write("      \r\n");
      out.write("      //页面加载完自动调用\r\n");
      out.write("      onload=sub;\r\n");
      out.write("\r\n");
      out.write("     //一个函数，可以使用onsubmit调用， 也可以使用onload调用\r\n");
      out.write("  function sub(click){\r\n");
      out.write("  \r\n");
      out.write("   var stat=true;\r\n");
      out.write("   \r\n");
      out.write("       var username=document.getElementsByName(\"username\")[0];\r\n");
      out.write("\t   var password1=document.getElementsByName(\"password\")[0];\r\n");
      out.write("\t   var password2=document.getElementsByName(\"password2\")[0];\r\n");
      out.write("\t   var email=document.getElementsByName(\"email\")[0];\r\n");
      out.write("\t   //obj为username\r\n");
      out.write("\t   check(username,\"请输入4-15位中文，英文或数字\",function(val){\r\n");
      out.write("\t      //此时的val就是输入的值，对应username\r\n");
      out.write("\t      if(val.match(/^\\S+$/) && val.length >=4 && val.length <=15){\r\n");
      out.write("\t            return true;\r\n");
      out.write("\t      }else{\r\n");
      out.write("\t          stat=false;\r\n");
      out.write("\t          return false;\r\n");
      out.write("\t      }\r\n");
      out.write("\t   \r\n");
      out.write("\t   },click);\r\n");
      out.write("\t   \r\n");
      out.write("\t   check(password1, \"密码必须在6-15位之间\", function(val){\r\n");
      out.write("\t\tif(val.match(/^\\S+$/) && val.length >=6 && val.length <=15){\r\n");
      out.write("\t\t\treturn true;\r\n");
      out.write("\t\t}else{\r\n");
      out.write("\t\t\tstat=false;\r\n");
      out.write("\t\t\treturn false;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}, click);\r\n");
      out.write("\r\n");
      out.write("\tcheck(password2, \"确定密码要和上面一致，规则也要相同\", function(val){\r\n");
      out.write("\t\tif(val.match(/^\\S+$/) && val.length >=6 && val.length <=15 && val==password1.value){\r\n");
      out.write("\t\t\treturn true;\r\n");
      out.write("\t\t}else{\r\n");
      out.write("\t\t\tstat=false;\r\n");
      out.write("\t\t\treturn false;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}, click)\r\n");
      out.write("\r\n");
      out.write("\t\r\n");
      out.write("\tcheck(email, \"要按邮箱规则输入\", function(val){\r\n");
      out.write("\t\tif(val.match(/\\w+@\\w+\\.\\w/)){\r\n");
      out.write("\t\t\treturn true;\r\n");
      out.write("\t\t}else{\r\n");
      out.write("\t\t\tstat=false;\r\n");
      out.write("\t\t\treturn false;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}, click)\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\treturn stat;\r\n");
      out.write("\t\r\n");
      out.write("  }    */\r\n");
      out.write("    \r\n");
      out.write(" var REGISTER={\r\n");
      out.write("\tparam:{\r\n");
      out.write("\t\t\t//单点登录系统的url\r\n");
      out.write("\t\t\tsurl:\"\"\r\n");
      out.write("      },\r\n");
      out.write("\t\t inputcheck:function(){\r\n");
      out.write("\t\t\t\t//不能为空检查\r\n");
      out.write("\t\t\t\tif ($(\"#regName\").val() == \"\") {\r\n");
      out.write("\t\t\t\t\talert(\"用户名不能为空\");\r\n");
      out.write("\t\t\t\t\t$(\"#regName\").focus();\r\n");
      out.write("\t\t\t\t\treturn false;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\tif ($(\"#pwd\").val() == \"\") {\r\n");
      out.write("\t\t\t\t\talert(\"密码不能为空\");\r\n");
      out.write("\t\t\t\t\t$(\"#pwd\").focus();\r\n");
      out.write("\t\t\t\t\treturn false;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\tif ($(\"#email\").val() == \"\") {\r\n");
      out.write("\t\t\t\t\talert(\"邮箱不能为空\");\r\n");
      out.write("\t\t\t\t\t$(\"#email\").focus();\r\n");
      out.write("\t\t\t\t\treturn false;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\t//密码检查\r\n");
      out.write("\t\t\t\tif ($(\"#pwd\").val() != $(\"#pwdRepeat\").val()) {\r\n");
      out.write("\t\t\t\t\talert(\"确认密码和密码不一致，请重新输入！\");\r\n");
      out.write("\t\t\t\t\t$(\"#pwdRepeat\").select();\r\n");
      out.write("\t\t\t\t\t$(\"#pwdRepeat\").focus();\r\n");
      out.write("\t\t\t\t\treturn false;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\treturn true;\r\n");
      out.write("\t\t}, \r\n");
      out.write("\t\tbeforeSubmit:function() {\r\n");
      out.write("\t\t\t\t//检查用户是否已经被占用\r\n");
      out.write("\t\t\t\t$.ajax({\r\n");
      out.write("\t            \turl : REGISTER.param.surl + \"/user/check/\"+escape($(\"#regName\").val())+\"/1?r=\" + Math.random(),\r\n");
      out.write("\t            \tsuccess : function(data) {\r\n");
      out.write("\t            \t\tif (data.data) {\r\n");
      out.write("\t            \t\t\t//检查是否存在\r\n");
      out.write("\t            \t\t\t$.ajax({\r\n");
      out.write("\t            \t\t\t\turl : REGISTER.param.surl + \"/user/check/\"+$(\"#email\").val()+\"/2?r=\" + Math.random(),\r\n");
      out.write("\t\t\t\t            \tsuccess : function(data) {\r\n");
      out.write("\t\t\t\t            \t\tif (data.data) {\r\n");
      out.write("\t\t\t\t\t            \t\tREGISTER.doSubmit();\r\n");
      out.write("\t\t\t\t            \t\t} else {\r\n");
      out.write("\t\t\t\t            \t\t\talert(\"此邮箱已经被注册！\");\r\n");
      out.write("\t\t\t\t            \t\t\t$(\"#email\").select();\r\n");
      out.write("\t\t\t\t            \t\t}\r\n");
      out.write("\t\t\t\t            \t}\r\n");
      out.write("\t            \t\t\t});\r\n");
      out.write("\t            \t\t} else {\r\n");
      out.write("\t            \t\t\talert(\"此用户名已经被占用，请选择其他用户名\");\r\n");
      out.write("\t            \t\t\t$(\"#regName\").select();\r\n");
      out.write("\t            \t\t}\t\r\n");
      out.write("\t            \t}\r\n");
      out.write("\t\t\t\t});\r\n");
      out.write("\t            \t\r\n");
      out.write("\t\t},\r\n");
      out.write("\t\tdoSubmit:function() {\r\n");
      out.write("\t\t\t$.post(\"/user/register\",$(\"#personRegForm\").serialize(), function(data){\r\n");
      out.write("\t\t\t\tif(data.status == 200){\r\n");
      out.write("\t\t\t\t\talert('用户注册成功！');\r\n");
      out.write("\t\t\t\t\tREGISTER.login();\r\n");
      out.write("\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\talert(\"注册失败！\");\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t},\r\n");
      out.write("\t\tlogin:function() {\r\n");
      out.write("\t\t\t location.href = \"http://localhost:8081\";\r\n");
      out.write("\t\t\t return false;\r\n");
      out.write("\t\t},\r\n");
      out.write("\t\treg:function() {\r\n");
      out.write("\t\t\t\tif (this.inputcheck()) {\r\n");
      out.write("\t\t\t\tthis.beforeSubmit();\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t};\r\n");
      out.write("</script>    \r\n");
      out.write("\r\n");
      out.write("  </body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
